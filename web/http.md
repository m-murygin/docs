# HTTP

## Задачи
1. Передача документов
1. Передача мета-информации
1. Авторизация
1. Поддержка сессий
1. Кэширование документов
1. Согласование содержимого (negotiation)
1. Управление соединением (`keep-alive` or `close`)

## Ключевые особенности
1. Работает поверх `TCP/TLS`
1. Протокол запрос-ответ (по умолчанию соединения не сохраняются).
1. Не поддерживает состояния - **stateless** (нет никакой гарантии что клиент будет работать с тем же сервером)
1. **Текстовый** протокол. Передача данных осуществляется ввиде человеко-читаемого текста.
1. Расширяемый (можно вводить пользовательские заголовки)

## HTTP/1.1
1. `HTTP` **запрос** состоит из
    * строка запроса
        * метод
        * URL документа
        * версия протокола
    * заголовки
    * тело запроса

    ```
    GET /robots.txt HTTP/1.1
    Accept: text/html,application/xhtml+xml
    Accept-Encoding: gzip, deflate
    Cache-Control: max-age=0
    Connection: keep-alive
    Host: www.ru
    ```

1. `HTTP` **ответ**:

    ```
    HTTP/1.1 404 Not Found
    Server: nginx/1.5.7
    Date: Sat, 25 Jul 2015 09:58:17 GMT
    Content-Type: text/html; charset=iso-8859-1
    Connection: close
    ```

## Заголовки HTTP
1. Общие
    * `Content-Type` - MIME тип документа
    * `Content-Length` - длина сообщения
    * `Content-Encoding` - кодирование документа, например `gzip` сжатие
    * `Transfer-Encoding` - формат передачи, например, `chunked`
    * `Connection` - управление соединением
    * `Upgrage` - смена протокола (к примеру с `TCP` на `UDP`)
1. Заголовки HTTP запросов
    * `Authorization` - авторизация, чаще всего логин\пароль
    * `Cookie` - передача состояния (сессии) на сервер
    * `Referer` - URL предыдущего документа

