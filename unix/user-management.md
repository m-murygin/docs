# User management

## Table of content
- [Common](#common)

## Common
1. **`whoami`** - показывает имя учетной записи
1. **`who`** - предоставляет информацию о том, какие пользователи осуществили вход в систему
1. **`who am i`** - выводит информацию о сессии текущего пользователя
1. **`w`** - показывает информацию о пользователях, которые осуществили вход в систему, а так же о том, чем они занимаются
1. **`id`** - показывает идентификатор текущего пользователя, основной идентификатор группы, а так же список групп, в которых состоит текущий пользователя.
    ```bash
    $ id
    uid=1000(max) gid=1000(max) groups=1000(max),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),124(sambashare),999(docker)
    ```
1. **`su`** - позволяет работать от другого пользователя системы
    ```bash
    su tania
    su root
    ```

    * по умолчанию при смене пользователя утилита `su` оставляет сохранение переменных окружения командной оболочик. Для того, чтобы работать от лица другого пользователя в окружении командной оболочки целевого пользователя, следует применять команду **`su -`**

        ```bash
        su - laura
        ```

    * если после `su` не указанно имя пользователя то считает что целевым пользователем является `root`.

1. **`sudo`** - позволяет пользователю осуществлять запуск программ с привелегиями других пользователей. Для того, чтобы данная утилита работала, системный администратор должен отредактировать (с помощью команды **`visudo`**) файл `/etc/sudoers`. Утилита `sudo` может оказаться полезной в случае возникновения необходимости делегирования административных задач другому пользователю (без передачи этому пользователю пароля пользователя root).

1. В некоторых дистрибутивах Linux, таких, как Ubuntu и Xubuntu пароль пользователя `root` изначально не установлен. Это значит, что не имеется возможности войти в систему под именем пользователя `root`. Для выполнения задач от лица пользователя `root` **_первому_** пользователю системы предоставляется возможность использования утилиты `sudo` благодаря добавлению специальной записи в файл `/etc/sudoers`.

    * Фактически все пользователи, являющиеся членами группы `admin`, также могут использовать утилиту `sudo` для исполнения команд от лица пользователя `root`.
        ```bash
        $ sudo grep admin /etc/sudoers
        # Members of the admin group may gain root privileges
        %admin ALL=(ALL) ALL
        ```
    * В результате **_первый_** пользователь работать от лица пользователя `root`
        ```bash
        sudo su -
        ```

## CRUD Users
1. Локальная база данных учетных записей пользователей расположена в файле **`/etc/passwd`**.
    ```bash
    $ cat /etc/passwd | grep -E 'max|root'
    root:x:0:0:root:/root:/bin/bash
    max:x:1000:1000:max,,,:/home/max:/bin/bash
    ```

    * В столбцах (разделённых двоеточикем) содержится следующая информация:
        1. имя пользователя
        1. симол х
        1. идентификатор пользователя
        1. идентификатор основной группы пользователя
        1. описание учетной записи пользователя
        1. пусть к домашней директории пользователя
        1. пусть к исполняемому файлу командной оболочки.

    * `root` всегда получает идентификатор 0
    * дополнительная информация может быть взята из справки:
        ```bash
        man 5 passwd
        ```
1. **`useradd`** - добавляет пользователя в систему
    ```bash
    $ useradd -m -d /home/yanina -c "yanina wickmayer" yanina
    $ tail -1 /etc/passwd
    yanina:x:529:529:yanina wickmayer:/home/yanina:/bin/bash
    ```

    **`/etc/default/useradd`** - файл содержащий параметры по умолчанию для новых добавляемых в систему пользователей.

    **`useradd -D`** - просмотр файла с дефолтными настройками для новых пользователей.

1. **`userdel`** - удаляет пользователя из системы
    ```bash
    userdel -r yanina
    ```

    * **`-r`** - удаляет так же и домашнюю директорию пользователя
